<div class="show_padrao">

  <%= render :file => "solicitantes/_show" %>

  <h1>Dados da reserva</h1>

  <p>
    <label>Protocolo:</label>
    <spam><%=h @requisicao.id%></spam>
  </p>

  <p>
    <label>Data de reserva:</label>
    <spam><%=h @requisicao.data_de_reserva.strftime("%d/%m/%Y")%></spam>
  </p>

  <p>
    <label>Categoria de ve&iacute;culo:</label>
    <spam><%=h CategoriaDeVeiculo.find(@requisicao.categoria_de_veiculo_id).nome %></spam>
  </p>

  <p>
    <label>Objetivo da reserva:</label>
    <spam>
      <%=h ObjetivoDeReserva.find(@requisicao.objetivo_de_reserva_id).texto \
        + ( @requisicao.outros.blank? ? '' : ": #{@requisicao.outros}" )
      %>
    </spam>
  </p>

  <p>
    <label>Passageiros:</label>
    <spam><%=h @requisicao.nome_telefone_passageiros %></spam>
  </p>

  <p>
    <label>Roteiro da agenda:</label>
    <spam><%=h @requisicao.roteiro_da_agenda %></spam>
  </p>

  <p>
    <label>Observacao:</label>
    <spam><%=h @requisicao.observacao.blank? ? '-' : @requisicao.observacao %></spam>
  </p>

  <p>
    <label>Estado:</label>
    <spam><%=h @requisicao.estado.to_s %></spam>
  </p>

  <% if !@requisicao.motivo_id.nil? %>
    <p>
      <label>Motivo informado pelo Sistema: </label>
      <spam><%=h Motivo.find(@requisicao.motivo_id).descricao %></spam>
    </p>
  <% end %>

  <% if !@requisicao.motivo_observacao.nil? %>
    <p>
      <label>Observa&ccedil;&otilde;es do motivo:</label>
      <spam><%=h @requisicao.motivo_observacao %></spam>
    </p>
  <% end %>

  <% if !@requisicao.motivo_professor.nil? %>
    <p>
      <label>Motivo informado pelo Professor:</label>
      <spam><%=h @requisicao.motivo_professor.to_s %></spam>
    </p>
  <% end %>

</div>

<!-- ======================================================================= -->

<div id="opcoes_da_visao">
  <ul>
    <li id="opcao_voltar" onclick="history.back(-1)" onmouseover="this.style.cursor = 'pointer'">Voltar</li>
    <li id="opcao_imprimir" onclick="window.print()" onmouseover="this.style.cursor = 'pointer'"><a href="javaScript:window.print()">Imprimir</a></li>

    <% if requisicao_pode_ser_aceita(@requisicao.estado) %>
      <li id="opcao_aceitar" onclick="location.href='<%= aceitar_viagem_path(@requisicao) %>'" onmouseover="this.style.cursor = 'pointer'"><%= link_to 'Aceitar', aceitar_viagem_path(@requisicao) %>
      </li>
    <% end %>

    <% if requisicao_pode_ser_cancelada(@requisicao.estado) %>
      <li id="opcao_cancelar" onclick="location.href='<%= cancelar_requisicao_pelo_sistema_path(@requisicao) %>'" onmouseover="this.style.cursor = 'pointer'"><%= link_to "Cancelar requisi&ccedil;&atilde;o", cancelar_requisicao_pelo_sistema_path(@requisicao) %></li>
    <% end %>

    <% if requisicao_pode_ser_rejeitada(@requisicao.estado) %>
      <li id="opcao_rejeitar" onclick="location.href='<%= rejeitar_path(@requisicao) %>'" onmouseover="this.style.cursor = 'pointer'"><%= link_to 'Rejeitar', rejeitar_path(@requisicao) %>
      </li>
    <% end %>

    <% if @requisicao.pode_alterar_viagem? %>
      <li id="opcao_alterar" onclick="location.href='<%= aceitar_path(@requisicao) %>'" onmouseover="this.style.cursor = 'pointer'">
        <%= link_to 'Alterar viagem', aceitar_path(@requisicao) %>
      </li>
    <% end %>
  </ul>
</div>

